import{m as q,n as w,p as $,q as H,d as C,a as x,v as j,x as F,y as G,z as V,A,D as M,G as K,H as X,I as B,b as i,J as Z,K as J,T as Q,L as W,M as R,N as p,O as N,P as I,Q as ee,S as te,U as O,V as ae,W as ne,X as U,Y as se,Z as Y,r as oe,_ as le,$ as ie}from"./index-BJ_qsAU2.js";const re=Symbol(),ce=()=>q(re,null);function ue(e,d){let n=null,o=0;return function(...f){if(n)return;const r=Date.now()-o,c=()=>{o=Date.now(),n=!1,e.apply(this,f)};r>=d?c():n=setTimeout(c,d)}}const[de,E]=w("back-top"),fe={right:$,bottom:$,zIndex:$,target:[String,Object],offset:H(200),immediate:Boolean,teleport:{type:[String,Object],default:"body"}};var he=C({name:de,inheritAttrs:!1,props:fe,emits:["click"],setup(e,{emit:d,slots:n,attrs:o}){let f=!1;const r=x(!1),c=x(),a=x(),g=j(()=>F(G(e.zIndex),{right:V(e.right),bottom:V(e.bottom)})),v=u=>{var s;d("click",u),(s=a.value)==null||s.scrollTo({top:0,behavior:e.immediate?"auto":"smooth"})},T=()=>{r.value=a.value?N(a.value)>=+e.offset:!1},k=()=>{const{target:u}=e;if(typeof u=="string"){const s=document.querySelector(u);if(s)return s}else return u},h=()=>{W&&R(()=>{a.value=e.target?k():p(c.value),T()})};return A("scroll",ue(T,100),{target:a}),M(h),K(()=>{f&&(r.value=!0,f=!1)}),X(()=>{r.value&&e.teleport&&(r.value=!1,f=!0)}),B(()=>e.target,h),()=>{const u=i("div",J({ref:e.teleport?void 0:c,class:E({active:r.value}),style:g.value,onClick:v},o),[n.default?n.default():i(Z,{name:"back-top",class:E("icon")},null)]);return e.teleport?[i("div",{ref:c,class:E("placeholder")},null),i(Q,{to:e.teleport},{default:()=>[u]})]:u}}});const ye=I(he),[ge,S,ve]=w("list"),me={error:Boolean,offset:H(300),loading:Boolean,disabled:Boolean,finished:Boolean,scroller:Object,errorText:String,direction:ee("down"),loadingText:String,finishedText:String,immediateCheck:te};var Te=C({name:ge,props:me,emits:["load","update:error","update:loading"],setup(e,{emit:d,slots:n}){const o=x(e.loading),f=x(),r=x(),c=ce(),a=O(f),g=j(()=>e.scroller||a.value),v=()=>{R(()=>{if(o.value||e.finished||e.disabled||e.error||(c==null?void 0:c.value)===!1)return;const{direction:s}=e,b=+e.offset,m=U(g);if(!m.height||se(f))return;let P=!1;const _=U(r);s==="up"?P=m.top-_.top<=b:P=_.bottom-m.bottom<=b,P&&(o.value=!0,d("update:loading",!0),d("load"))})},T=()=>{if(e.finished){const s=n.finished?n.finished():e.finishedText;if(s)return i("div",{class:S("finished-text")},[s])}},k=()=>{d("update:error",!1),v()},h=()=>{if(e.error){const s=n.error?n.error():e.errorText;if(s)return i("div",{role:"button",class:S("error-text"),tabindex:0,onClick:k},[s])}},u=()=>{if(o.value&&!e.finished&&!e.disabled)return i("div",{class:S("loading")},[n.loading?n.loading():i(Y,{class:S("loading-icon")},{default:()=>[e.loadingText||ve("loading")]})])};return B(()=>[e.loading,e.finished,e.error],v),c&&B(c,s=>{s&&v()}),ae(()=>{o.value=e.loading}),M(()=>{e.immediateCheck&&v()}),ne({check:v}),A("scroll",v,{target:g,passive:!0}),()=>{var s;const b=(s=n.default)==null?void 0:s.call(n),m=i("div",{ref:r,class:S("placeholder")},null);return i("div",{ref:f,role:"feed",class:S(),"aria-busy":o.value},[e.direction==="down"?b:m,u(),T(),h(),e.direction==="up"?b:m])}}});const He=I(Te),[xe,y,be]=w("pull-refresh"),z=50,Se=["pulling","loosing","success"],ke={disabled:Boolean,modelValue:Boolean,headHeight:H(z),successText:String,pullingText:String,loosingText:String,loadingText:String,pullDistance:$,successDuration:H(500),animationDuration:H(300)};var Pe=C({name:xe,props:ke,emits:["change","refresh","update:modelValue"],setup(e,{emit:d,slots:n}){let o;const f=x(),r=x(),c=O(f),a=oe({status:"normal",distance:0,duration:0}),g=le(),v=()=>{if(e.headHeight!==z)return{height:`${e.headHeight}px`}},T=()=>a.status!=="loading"&&a.status!=="success"&&!e.disabled,k=t=>{const l=+(e.pullDistance||e.headHeight);return t>l&&(t<l*2?t=l+(t-l)/2:t=l*1.5+(t-l*2)/4),Math.round(t)},h=(t,l)=>{const D=+(e.pullDistance||e.headHeight);a.distance=t,l?a.status="loading":t===0?a.status="normal":t<D?a.status="pulling":a.status="loosing",d("change",{status:a.status,distance:t})},u=()=>{const{status:t}=a;return t==="normal"?"":e[`${t}Text`]||be(t)},s=()=>{const{status:t,distance:l}=a;if(n[t])return n[t]({distance:l});const D=[];return Se.includes(t)&&D.push(i("div",{class:y("text")},[u()])),t==="loading"&&D.push(i(Y,{class:y("loading")},{default:u})),D},b=()=>{a.status="success",setTimeout(()=>{h(0)},+e.successDuration)},m=t=>{o=N(c.value)===0,o&&(a.duration=0,g.start(t))},P=t=>{T()&&m(t)},_=t=>{if(T()){o||m(t);const{deltaY:l}=g;g.move(t),o&&l.value>=0&&g.isVertical()&&(ie(t),h(k(l.value)))}},L=()=>{o&&g.deltaY.value&&T()&&(a.duration=+e.animationDuration,a.status==="loosing"?(h(+e.headHeight,!0),d("update:modelValue",!0),R(()=>d("refresh"))):h(0))};return B(()=>e.modelValue,t=>{a.duration=+e.animationDuration,t?h(+e.headHeight,!0):n.success||e.successText?b():h(0,!1)}),A("touchmove",_,{target:r}),()=>{var t;const l={transitionDuration:`${a.duration}ms`,transform:a.distance?`translate3d(0,${a.distance}px, 0)`:""};return i("div",{ref:f,class:y()},[i("div",{ref:r,class:y("track"),style:l,onTouchstartPassive:P,onTouchend:L,onTouchcancel:L},[i("div",{class:y("head"),style:v()},[s()]),(t=n.default)==null?void 0:t.call(n)])])}}});const _e=I(Pe);export{ye as B,He as L,_e as P};
