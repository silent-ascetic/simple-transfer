import{h as C,d as F,r as T,a as d,o as a,c as h,b as o,w as l,e as m,f as k,F as w,g as q,s as z,i as N,E as P,C as S,R as $}from"./index-BJ_qsAU2.js";import{L as j,P as A,B as D}from"./index-KLdWLLb3.js";import{B as M}from"./index-C5y3z9Gp.js";import{C as G}from"./index-DM1SbCO1.js";function H(s){return C.request({url:"/download/getList",method:"get",params:s})}function J(s){return C.request({url:"/download/deleteFile",method:"delete",data:s})}const K=F({name:"Download"}),Y=F({...K,setup(s){const c=T([]),r=d(!1),i=d(!1),_=d(!1),f=d(!1),p=()=>{console.log("下拉刷新"),_.value=!1,r.value=!0,c.length=0,v(),i.value=!1},v=()=>{console.log("加载"),H().then(n=>{c.push(...n.data),r.value=!1,_.value=!0,f.value=c.length<=0,console.log("加载完成")})},y=n=>{const e=document.createElement("a");e.href=n.downloadUrl,e.target="_blank",e.download=n.name,e.click()},B=n=>{J({fileMd5:n}).then(u=>{u.respCode===200?(z("删除成功"),p()):N(u.msg)})};return(n,e)=>{const u=P,b=G,g=S,L=M,x=$,V=j,E=A,R=D;return a(),h(w,null,[o(E,{modelValue:i.value,"onUpdate:modelValue":e[1]||(e[1]=t=>i.value=t),onRefresh:p,"success-text":"刷新成功","head-height":65},{default:l(()=>[f.value?(a(),m(u,{key:0,description:"暂无文件"})):k("",!0),f.value?k("",!0):(a(),m(V,{key:1,loading:r.value,"onUpdate:loading":e[0]||(e[0]=t=>r.value=t),finished:_.value,"finished-text":"没有更多了",onLoad:v},{default:l(()=>[(a(!0),h(w,null,q(c,t=>(a(),m(x,{gutter:"10",justify:"space-between",align:"center",key:t.downloadUrl},{default:l(()=>[o(g,{span:"20"},{default:l(()=>[o(b,{title:t.name,value:t.sizeStr,clickable:!0,onClick:U=>y(t)},null,8,["title","value","onClick"])]),_:2},1024),o(g,{span:"4"},{default:l(()=>[o(L,{icon:"delete",round:"",size:"small",type:"danger",onClick:U=>B(t.md5)},null,8,["onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:1},8,["loading","finished"]))]),_:1},8,["modelValue"]),o(R)],64)}}});export{Y as default};
